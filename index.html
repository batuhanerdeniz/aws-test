<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Energy-Pool Internal App Portal | Complex System Universe</title>
    <style>
      html {
        color-scheme: light dark;
      }
      body {
        font-family: system-ui;
        font-size: 1.125rem;
        line-height: 1.5;
        margin: 0;
        color: #3b3b3b;
        background-color: white;
      }
      nav{
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #ff9900;
            padding: 0px 2rem;
            height: 80px;
        }
        nav a{
            color: #3b3b3b;
            text-decoration: none;
        }
        .nav-logout{
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .nav-logout a{
            color: #3b3b3b;
            text-decoration: none;
        }
      .content {
        display: flex;
        flex-direction: row;
        height: calc(100vh - 80px);
      }
      .sidebar {
        width: 12%;
        background-color: #dfdfdf;
        padding: 2rem 2rem;
      }
      .sidebar select {
        width: 100%;
        height: 50px;
        border: 0;
        border-radius: 10px;
        background-color: #3b3b3b;
        color: #dfdfdf;
        font-family: system-ui;
        font-size: 1.125rem;
      }
      .sidebar input[type="text"] {
            height: 50px;
            border: 0;
            border-radius: 10px;
            background-color: #3b3b3b;
            color: #dfdfdf;
            font-family: system-ui;
            font-size: 1.125rem;
      }
      .main {
        background-color: rgb(244, 244, 244);
        width: 80%;
        padding: 2rem 2rem;
        color: #3b3b3b;
        display: flex;
        flex-wrap: wrap;
        justify-content: center;

      }
      #networkContainer {
        width: 100%;
        height: 100%;
      }
      #relations {
        background-color: #3b3b3b;
        color: #dfdfdf;
        padding: 2rem 0;
        border-radius: 10px;
        margin-top: 2rem;
      }
      #relations label {
        width: 100px;
      }
      .right-sidebar {
        width: 12%;
        float: right;
        background-color: #dfdfdf;
        padding: 2rem 2rem;
      }
        .right-sidebar input {
            width: 100%;
            height: 50px;
            border: 0;
            border-radius: 10px;
            background-color: #3b3b3b;
            color: #dfdfdf;
            font-family: system-ui;
            font-size: 1.125rem;
        }
        .right-sidebar select {
            width: 100%;
            height: 50px;
            border: 0;
            border-radius: 10px;
            background-color: #3b3b3b;
            color: #dfdfdf;
            font-family: system-ui;
            font-size: 1.125rem;
        }

      .container {
    background-color: #ffffff;
    border: 1px solid #ccc;
    padding: 20px;
    border-radius: 10px;
    margin: 10px;
}
    </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-matrix@1.1"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-sankey"></script>
  </head>
  <body>
    <nav>
        <div>
            <a href="/">Energy-Pool Internal App Portal | OSSEI V2</a>
        </div>
        <div class="nav-logout">
            <a href="#">Welcome to the Portal, {{ user }}!</a>
            <a href="/logout">Logout</a>
        </div>
    </nav>
    <div class="content">
      <div class="sidebar">
        <div class="sidebar-content">
          <p>Client</p>
          <select name="client" id="client" onchange="clientSelect(client)">
            <option value="ugitech">Ugitech</option>
            <option value="valorem">Valorem</option>
          </select>
          <br />
          <p>Plant</p>
          <select name="plant" id="plant" onchange="plantSelect(client)">
            <option value="ugitech">Ugitech</option>
            <option value="valorem">valorem</option>
          </select>
          <p>Relations</p>
          <div id="relations">
            <input
              type="checkbox"
              id="relation1"
              name="relation1"
              value="relation1"
            />
            <label for="relation1">Power</label><br />
            <input
              type="checkbox"
              id="relation2"
              name="relation2"
              value="relation2"
            />
            <label for="relation2">Gas</label><br />
            <input
              type="checkbox"
              id="relation3"
              name="relation3"
              value="relation3"
            />
            <label for="relation3">Water</label><br />
            <input
              type="checkbox"
              id="relation3"
              name="relation3"
              value="relation3"
            />
            <label for="relation3">Product</label><br />
            <input
              type="checkbox"
              id="relation3"
              name="relation3"
              value="relation3"
            />
            <label for="relation3">Flex</label><br />
          </div>
          <br>
          <hr>
          <p>Option 1</p>
          <input type="text">
          <p>Option 2</p>
          <input type="text">
        </div>
      </div>

      <div class="main">
          <div class="container">
            <canvas id="redchart" width="400" height="350"></canvas>
          </div>
          <div class="container">
            <canvas id="chart-area" width="400" height="350"></canvas>
        </div>
        <div class="container">
            <canvas id="barChart" width="400" height="300"></canvas>
          </div>
          <div class="container">
            <canvas id="sankeychart" width="400" height="300"></canvas>
        </div>
      </div>

      <div class="right-sidebar">
        <p>Option 1</p>
        <p>Option 2</p>
        <p>Option 3</p>
        <p>Option 4</p>
        <p>Option 5</p>
        <p>Option 6</p>
        <p>Option 7</p>
        <p>Option 8</p>

        <hr>
        <br>

        <select name="" id="">
            <option value="">Option 1</option>
            <option value="">Option 2</option>
            <option value="">Option 3</option>
            <option value="">Option 4</option>
            <option value="">Option 5</option>
            <option value="">Option 6</option>
            <option value="">Option 7</option>
            <option value="">Option 8</option>
        </select>


        <p>Input 1</p>
        <input type="text">
        <p>Input 2</p>
        <input type="text">
        <p>Input 3</p>
        <input type="text">
      </div>
    </div>


    <!-- GREEN HEATMAP CHART -->
    <script>
        Chart.defaults.font.size = 12;
        Chart.defaults.font.family = 'system-ui';
        var ctx = document.getElementById("chart-area").getContext("2d");
                    window.myMatrix = new Chart(ctx, {
                        type: 'matrix',
                        data: {
                            datasets: [{
                                label: 'Electric',
                                data: [
                                    {x: 'Week 1', y: 'Mon', v: 9},
                                    {x: 'Week 1', y: 'Tue', v: 5},
                                    {x: 'Week 1', y: 'Wed', v: 3},
                                    {x: 'Week 1', y: 'Thu', v: 5},
                                    {x: 'Week 1', y: 'Fri', v: 2},
                                    {x: 'Week 1', y: 'Sat', v: 3},
                                    {x: 'Week 1', y: 'Sun', v: 4},
                                    {x: 'Week 2', y: 'Mon', v: 2},
                                    {x: 'Week 2', y: 'Tue', v: 1},
                                    {x: 'Week 2', y: 'Wed', v: 3},
                                    {x: 'Week 2', y: 'Thu', v: 2},
                                    {x: 'Week 2', y: 'Fri', v: 6},
                                    {x: 'Week 2', y: 'Sat', v: 2},
                                    {x: 'Week 2', y: 'Sun', v: 6},
                                    {x: 'Week 3', y: 'Mon', v: 3},
                                    {x: 'Week 3', y: 'Tue', v: 9},
                                    {x: 'Week 3', y: 'Wed', v: 6},
                                    {x: 'Week 3', y: 'Thu', v: 4},
                                    {x: 'Week 3', y: 'Fri', v: 3},
                                    {x: 'Week 3', y: 'Sat', v: 9},
                                    {x: 'Week 3', y: 'Sun', v: 6},
                                    {x: 'Week 4', y: 'Mon', v: 6},
                                    {x: 'Week 4', y: 'Tue', v: 4},
                                    {x: 'Week 4', y: 'Wed', v: 3},
                                    {x: 'Week 4', y: 'Thu', v: 9},
                                    {x: 'Week 4', y: 'Fri', v: 6},
                                    {x: 'Week 4', y: 'Sat', v: 4},
                                    {x: 'Week 4', y: 'Sun', v: 3},
        
        
                                    
                                ],
                                backgroundColor(context) {
                                    const value = context.dataset.data[context.dataIndex].v;
                                    const alpha = (value) / 10;
                                    return Chart.helpers.color('green').alpha(alpha).rgbString();
                                },
                                width(context) {
                                    const a = context.chart.chartArea;
                                    if (!a) {
                                        return 0;
                                    }
                                    return (a.right - a.left) / 4;
                                },
                                height(context) {
                                    const a = context.chart.chartArea;
                                    if (!a) {
                                        return 0;
                                    }
                                    return (a.bottom - a.top) / 7;
                                }
                            }]
                        },
                        options: {
                            legend: {
                                display: false
                            },
                            tooltips: {
                                callbacks: {
                                    title() {
                                        return '';
                                    },
                                    label(context) {
                                        const v = context.dataset.data[context.dataIndex];
                                        return ['x: ' + v.x, 'y: ' + v.y, 'v: ' + v.v];
                                    }
                                }
                            },
                            scales: {
                                x: {
                                    type: 'category',
                                    labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                                    ticks: {
                                        display: true
                                    },
                                    gridLines: {
                                        display: false
                                    }
                                },
                                y: {
                                    type: 'category',
                                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                                    offset: true,
                      reverse: false,
                                    ticks: {
                                        display: true
                                    },
                                    gridLines: {
                                        display: false
                                    }
                                }
                            }
                        }
                    });
    </script>
    <!-- RED HEATMAP CHART -->
    <script>
    Chart.defaults.font.size = 12;
        Chart.defaults.font.family = 'system-ui';
    var ctx = document.getElementById("redchart").getContext("2d");
                window.myMatrix = new Chart(ctx, {
                    type: 'matrix',
                    data: {
                        datasets: [{
                            label: 'Gas',
                            data: [
                                {x: 'Week 1', y: 'Mon', v: 1},
                                {x: 'Week 1', y: 'Tue', v: 5},
                                {x: 'Week 1', y: 'Wed', v: 3},
                                {x: 'Week 1', y: 'Thu', v: 5},
                                {x: 'Week 1', y: 'Fri', v: 2},
                                {x: 'Week 1', y: 'Sat', v: 3},
                                {x: 'Week 1', y: 'Sun', v: 4},
                                {x: 'Week 2', y: 'Mon', v: 2},
                                {x: 'Week 2', y: 'Tue', v: 1},
                                {x: 'Week 2', y: 'Wed', v: 3},
                                {x: 'Week 2', y: 'Thu', v: 2},
                                {x: 'Week 2', y: 'Fri', v: 2},
                                {x: 'Week 2', y: 'Sat', v: 2},
                                {x: 'Week 2', y: 'Sun', v: 6},
                                {x: 'Week 3', y: 'Mon', v: 3},
                                {x: 'Week 3', y: 'Tue', v: 4},
                                {x: 'Week 3', y: 'Wed', v: 3},
                                {x: 'Week 3', y: 'Thu', v: 4},
                                {x: 'Week 3', y: 'Fri', v: 3},
                                {x: 'Week 3', y: 'Sat', v: 4},
                                {x: 'Week 3', y: 'Sun', v: 6},
                                {x: 'Week 4', y: 'Mon', v: 3},
                                {x: 'Week 4', y: 'Tue', v: 4},
                                {x: 'Week 4', y: 'Wed', v: 3},
                                {x: 'Week 4', y: 'Thu', v: 4},
                                {x: 'Week 4', y: 'Fri', v: 4},
                                {x: 'Week 4', y: 'Sat', v: 4},
                                {x: 'Week 4', y: 'Sun', v: 3},
    
    
                                
                            ],
                            backgroundColor(context) {
                                const value = context.dataset.data[context.dataIndex].v;
                                const alpha = (value) / 10;
                                return Chart.helpers.color('red').alpha(alpha).rgbString();
                            },
                            width(context) {
                                const a = context.chart.chartArea;
                                if (!a) {
                                    return 0;
                                }
                                return (a.right - a.left) / 4;
                            },
                            height(context) {
                                const a = context.chart.chartArea;
                                if (!a) {
                                    return 0;
                                }
                                return (a.bottom - a.top) / 7;
                            }
                        }]
                    },
                    options: {
                        legend: {
                            display: false
                        },
                        tooltips: {
                            callbacks: {
                                title() {
                                    return '';
                                },
                                label(context) {
                                    const v = context.dataset.data[context.dataIndex];
                                    return ['x: ' + v.x, 'y: ' + v.y, 'v: ' + v.v];
                                }
                            }
                        },
                        scales: {
                            x: {
                                type: 'category',
                                labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                                ticks: {
                                    display: true
                                },
                                gridLines: {
                                    display: false
                                }
                            },
                            y: {
                                type: 'category',
                                labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                                offset: true,
                  reverse: false,
                                ticks: {
                                    display: true
                                },
                                gridLines: {
                                    display: false
                                }
                            }
                        }
                    }
                });
    </script>
    <!-- BAR CHART   -->
    <script>
        Chart.defaults.font.size = 12;
        Chart.defaults.font.family = 'system-ui';
        const bardata = {
            labels: ['January', 'February', 'March', 'April', 'May'],
            datasets: [{
                label: 'Monthly Flex',
                data: [50, 60, 70, 45, 80],
                backgroundColor: 'rgba(75, 192, 192, 0.7)',
                borderColor: 'rgba(75, 192, 192, 1)',
                borderWidth: 1,
            }]
        };

        // Configuration for the bar chart
        const barconfig = {
            type: 'bar',
            data: bardata,
            options: {
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Month'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Sales'
                        }
                    }
                }
            },
        };

        // Create the bar chart
        const barctx = document.getElementById('barChart').getContext('2d');
        const barChart = new Chart(barctx, barconfig);
    </script>
    <!-- SANKEY CHART -->
    <script>
var ctx = document.getElementById("sankeychart").getContext("2d");

var colors = {
  Oil: "black",
  Coal: "gray",
  "Fossil Fuels": "slategray",
  Electricity: "blue",
  Energy: "orange"
};

// the y-order of nodes, smaller = higher
var priority = {
  Oil: 1,
  'Narural Gas': 2,
  Coal: 3,
  'Fossil Fuels': 1,
  Electricity: 2,
  Energy: 1
};

var labels = {
  Oil: 'Oil'
}

function getColor(name) {
  return colors[name] || "green";
}

var chart = new Chart(ctx, {
  type: "sankey",
  
  data: {
    datasets: [
      {
        data: [
          { from: "Oil", to: "Fossil Fuels", flow: 15 },
          { from: "Natural Gas", to: "Fossil Fuels", flow: 20 },
          { from: "Coal", to: "Fossil Fuels", flow: 25 },
          { from: "Coal", to: "Electricity", flow: 25 },
          { from: "Fossil Fuels", to: "Energy", flow: 60 },
          { from: "Electricity", to: "Energy", flow: 25 }
        ],
        priority,
        labels,
        colorFrom: (c) => getColor(c.dataset.data[c.dataIndex].from),
        colorTo: (c) => getColor(c.dataset.data[c.dataIndex].to),
        borderWidth: 2,
        borderColor: 'black'
      }
    ]
  }
});


    </script>


  </body>
</html>
